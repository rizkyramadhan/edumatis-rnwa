{"version":3,"file":"static/webpack/static/development/pages/index.js.14a6cdb636ae9a312e8e.hot-update.js","sources":["webpack:///./pages/app/stores/Session.ts"],"sourcesContent":["import login from \"@app/libs/queries/user/login\";\nimport { flow, types } from \"mobx-state-tree\";\nimport AsyncStorage from \"@app/libs/utils/AsyncStorage\";\nimport { UserRecord } from \"./User\";\nimport List from \"@app/libs/utils/List\";\nimport Record from \"@app/libs/utils/Record\";\nimport config from \"@app/config\";\n\nexport const SessionRecord = Record({\n  tableName: \"session\",\n  columns: {\n    id: types.maybe(types.string),\n    client_id: types.maybe(types.integer),\n    user: UserRecord\n  },\n  actions: (self: any) => ({\n    login: flow(function*(client_id, username, password) {\n      try {\n        const response = yield login(client_id, username, password);\n        console.log('dapat', response);\n        yield AsyncStorage.setItem(\"SESSION\", JSON.stringify(response));\n        return response;\n      } catch (e) {\n        console.warn(e);\n        return false;\n      }\n    }),\n    restore: function(session: any) {\n      self.id = session.id;\n      self[config.table + \"_id\"] = session[config.table + \"_id\"];\n      self[config.table] = session[config.table];\n    },\n    logout: flow(function*() {\n      yield AsyncStorage.removeItem(\"SESSION\");\n      self.id = null;\n      self[config.table + \"_id\"] = null;\n      self[config.table] = null;\n    })\n  })\n});\n\nexport const SessionList = List({\n  record: SessionRecord,\n  query: `{\n    id\n    user_id\n  }`\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAHA;AAEA;AACA;AAHA;AAIA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AAOA;AAPA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAEA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAjBA;AAAA;AAPA;AAiCA;AACA;AACA;AAFA;;;;A","sourceRoot":""}