{"version":3,"file":"static/webpack/static/development/pages/index.js.b0e2456db6a9087bbe07.hot-update.js","sources":["webpack:///./pages/app/screens/admin/Kewajiban/KewajibanDetail.tsx"],"sourcesContent":["import createRecord from \"@app/libs/queries/crud/createRecord\";\nimport deleteRecord from \"@app/libs/queries/crud/deleteRecord\";\nimport rawQuery from \"@app/libs/queries/crud/rawQuery\";\nimport updateRecord from \"@app/libs/queries/crud/updateRecord\";\nimport UIBody from \"@app/libs/ui/UIBody\";\nimport UIButton from \"@app/libs/ui/UIButton\";\nimport UICol from \"@app/libs/ui/UICol\";\nimport UIContainer from \"@app/libs/ui/UIContainer\";\nimport UIFieldSelectNative from \"@app/libs/ui/UIFieldSelectNative\";\nimport UIFieldText from \"@app/libs/ui/UIFieldText\";\nimport UIHead from \"@app/libs/ui/UIHead\";\nimport UIRow from \"@app/libs/ui/UIRow\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React, { useEffect } from \"react\";\nimport { Alert, Platform, Text, View, TouchableOpacity } from \"react-native\";\nimport KelasPicker from \"../Kelas/KelasPicker\";\nimport get from \"lodash.get\";\n\nexport default observer(({ navigation }: any) => {\n  const data = useObservable({\n    form: navigation.getParam(\"item\")\n  });\n  const count = get(data, \"form.transaksi_aggregate.aggregate.count\");\n  useEffect(() => {\n    if (data.form.id) {\n      rawQuery(`\n      {\n        kewajiban(where: {id: {_eq: ${data.form.id}}}) {\n          kelas\n          batas_pembayaran\n          id\n          nominal\n          nama_kewajiban\n          status\n          tgl_batas_pembayaran_bulan\n          tipe_pembayaran\n          transaksi_aggregate {\n            aggregate {\n              count\n            }\n          }\n        }\n      }\n    `).then((res: any) => {\n        data.form = res.kewajiban[0];\n      });\n    }\n  }, []);\n\n  return (\n    <UIContainer>\n      <UIHead\n        navigation={navigation}\n        title={\n          ` Kewajiban ` +\n          (data.form.id\n            ? `#${data.form.id}: ${data.form.nama_kewajiban}`\n            : `Baru`)\n        }\n        onBack={() => {\n          navigation.goBack();\n        }}\n      >\n        <UIRow>\n          <UIButton\n            onPress={async () => {\n              if (data.form.id) {\n                await updateRecord(\"kewajiban\", data.form);\n              } else {\n                await createRecord(\"kewajiban\", data.form);\n              }\n              navigation.goBack();\n            }}\n          >\n            Simpan\n          </UIButton>\n          {count === 0 && (\n            <UIButton\n              style={{\n                backgroundColor: \"red\",\n                marginLeft: -5\n              }}\n              onPress={async () => {\n                if (Platform.OS === \"web\") {\n                  if (\n                    confirm(\"Apakah anda yakin ingin menghapus kewajiban ini ?\")\n                  ) {\n                    if (data.form.id) {\n                      await deleteRecord(\"kewajiban\", { id: data.form.id });\n                    }\n                    navigation.goBack();\n                  }\n                } else {\n                  Alert.alert(\n                    \"Menghapus Kewajiban\",\n                    \"Apakah Anda yakin ingin menghapus kewajiban ini ?\",\n                    [\n                      {\n                        text: \"NO\",\n                        style: \"cancel\",\n                        onPress: () => {}\n                      },\n                      {\n                        text: \"YES\",\n                        onPress: async () => {\n                          if (data.form.id) {\n                            await deleteRecord(\"kewajiban\", {\n                              id: data.form.id\n                            });\n                          }\n                          navigation.goBack();\n                        }\n                      }\n                    ]\n                  );\n                }\n              }}\n            >\n              Hapus\n            </UIButton>\n          )}\n        </UIRow>\n      </UIHead>\n      <UIBody>\n        <UIRow style={{ paddingBottom: 25 }}>\n          {count === 0 ? (\n            <Text>Transaksi untuk kewajiban ini masih kosong.</Text>\n          ) : (\n            <TouchableOpacity>\n              <UIRow>\n                <Text>Terdapat</Text>\n                <Text\n                  style={{\n                    marginHorizontal: 5,\n                    textDecorationLine: \"underline\"\n                  }}\n                >\n                  {count} transaksi\n                </Text>\n                <Text> untuk kewajiban ini.</Text>\n              </UIRow>\n            </TouchableOpacity>\n          )}\n        </UIRow>\n        <UIFieldText\n          label=\"Nama Kewajiban\"\n          setValue={(value: any) => {\n            data.form.nama_kewajiban = value;\n          }}\n          value={data.form.nama_kewajiban}\n        />\n        <UIRow>\n          <UICol size={4} sizesm={6} sizexs={6} sizemd={6}>\n            <UIFieldText\n              label=\"Nominal\"\n              setValue={(value: any) => {\n                data.form.nominal = value;\n              }}\n              value={data.form.nominal}\n            />\n          </UICol>\n          <UICol size={4} sizesm={6} sizexs={6} sizemd={6}>\n            <UIFieldSelectNative\n              label=\"Status Kewajiban\"\n              items={[\"aktif\", \"non-aktif\"]}\n              setValue={(value: any) => {\n                data.form.status = value;\n              }}\n              value={data.form.status}\n            />\n          </UICol>\n          <UICol size={4} sizesm={6} sizexs={6} sizemd={6}>\n            <UIFieldSelectNative\n              label=\"Tipe Pembayaran\"\n              items={[\"Bulanan\", \"Insidentil\"]}\n              setValue={(value: any) => {\n                data.form.tipe_pembayaran = value;\n              }}\n              value={data.form.tipe_pembayaran}\n            />\n          </UICol>\n        </UIRow>\n        <KelasPicker\n          form={data.form}\n          renderKelasTitle={(kelas: any) => (\n            <Text>Rp {parseInt(kelas.nominal).toLocaleString()} </Text>\n          )}\n          renderKelas={(kelas: any) => {\n            return (\n              <View>\n                <UIFieldText\n                  label={`Nominal untuk murid kelas ${kelas.nama_kelas}`}\n                  value={kelas.nominal}\n                  setValue={(value: any) => {\n                    kelas.nominal = value;\n                  }}\n                />\n                <Text style={{ padding: 10, paddingLeft: 15, color: \"#333\" }}>\n                  Khusus untuk murid ini, di set sesuai nominal tertera:\n                </Text>\n              </View>\n            );\n          }}\n          renderMurid={(murid: any, kelas: any) => {\n            return (\n              <UICol size={6}>\n                <UIFieldText\n                  label=\"Nominal\"\n                  value={murid.nominal || kelas.nominal}\n                  setValue={(value: any) => {\n                    murid.nominal = value;\n                  }}\n                />\n              </UICol>\n            );\n          }}\n        />\n      </UIBody>\n    </UIContainer>\n  );\n});\n"],"mappings":"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","sourceRoot":""}