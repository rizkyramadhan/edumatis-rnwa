{"version":3,"file":"static/webpack/static/development/pages/index.js.afafd2cca48dc29365ab.hot-update.js","sources":["webpack:///./pages/app/screens/admin/Kelas/MuridList.tsx"],"sourcesContent":["import UIButton from \"@app/libs/ui/UIButton\";\nimport UIImage from \"@app/libs/ui/UIImage\";\nimport UIList from \"@app/libs/ui/UIList\";\nimport UIListItem from \"@app/libs/ui/UIListItem\";\nimport { observer, useObservable } from \"mobx-react-lite\";\nimport React from \"react\";\nimport { Text, View, TouchableOpacity } from \"react-native\";\nimport { toJS } from \"mobx\";\n\nexport default observer(\n  (data: { kelas: any; list: any[]; loading: boolean; navigation: any }) => {\n    const meta = useObservable({\n      checked: [] as any\n    });\n    if (!data.list) return null;\n\n    return (\n      <View style={{ paddingHorizontal: 10 }}>\n        <View\n          style={{\n            borderBottomColor: \"#ddd\",\n            borderBottomWidth: 2,\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            padding: 10,\n            justifyContent: \"space-between\"\n          }}\n        >\n          <Text style={{ color: \"#999\" }}>\n            Total Murid: {data.list.length}\n            {meta.checked.length > 0 &&\n              ` • Murid Terpilih: ${meta.checked.length}`}\n          </Text>\n          <View\n            style={{\n              flexDirection: \"row\",\n              alignItems: \"center\"\n            }}\n          >\n            {false && meta.checked.length > 0 && (\n              <UIButton\n                size=\"small\"\n                fill=\"outline\"\n                style={{ margin: 0, marginLeft: 8 }}\n                labelStyle={{\n                  flexDirection: \"row\",\n                  alignItems: \"center\",\n                  paddingTop: 2,\n                  paddingBottom: 2,\n                  paddingHorizontal: 0\n                }}\n              >\n                <UIImage\n                  source={require(\"@app/imgs/move.png\")}\n                  style={{ width: 18, height: 18, marginLeft: 8 }}\n                />\n                Pindah Ke Kelas Lain\n              </UIButton>\n            )}\n            <UIButton\n              size=\"small\"\n              fill=\"outline\"\n              style={{ margin: 0, marginLeft: 8 }}\n              labelStyle={{\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                paddingTop: 2,\n                paddingBottom: 2,\n                paddingHorizontal: 0\n              }}\n              onPress={() => {\n                let hasDetail = true;\n                const list = toJS(data.list);\n                list.forEach(item => {\n                  if (!item.detail || !item.detail.nik) {\n                    hasDetail = false;\n                  }\n                });\n\n                const header: any = [];\n                const finalList: any = [];\n\n                header.push(\"nisn\");\n                header.push(\"nsa\");\n                header.push(\"nama_lengkap\");\n                header.push(\"tgl_lahir\");\n\n                if (hasDetail) {\n                  list.forEach(item => {\n                    if (item.detail && item.detail.nik) {\n                      if (header.length === 0) {\n                        for (let i in item.detail) {\n                          header.push(i);\n                        }\n                      }\n                    }\n                  });\n                }\n\n                finalList.push(header);\n                list.forEach(item => {\n                  const row = [];\n                  row.push(item[\"nisn\"]);\n                  row.push(item[\"nsa\"]);\n                  row.push(item[\"nama_murid\"]);\n                  row.push(item[\"tgl_lahir\"]);\n                  if (item.detail && item.detail.nik) {\n                    for (let i in item.detail) {\n                      row.push(i);\n                    }\n                  }\n                  finalList.push(row);\n                });\n                console.log(finalList);\n\n                var finalVal = \"\";\n                for (var i = 0; i < finalList.length; i++) {\n                  var value = finalList[i];\n\n                  for (var j = 0; j < value.length; j++) {\n                    var innerValue =\n                      value[j] === null ? \"\" : value[j].toString();\n                    var result = innerValue.replace(/\"/g, '\"\"');\n                    if (result.search(/(\"|,|\\n)/g) >= 0)\n                      result = '\"' + result + '\"';\n                    if (j > 0) finalVal += \",\";\n                    finalVal += result;\n                  }\n\n                  finalVal += \"\\n\";\n                }\n                var pom = document.createElement(\"a\");\n                var csvContent = finalVal; //here we load our csv data\n                var blob = new Blob([csvContent], {\n                  type: \"text/csv;charset=utf-8;\"\n                });\n                var url = URL.createObjectURL(blob);\n                pom.href = url;\n                pom.setAttribute(\n                  \"download\",\n                  `Kelas_${data.kelas.nama_kelas.replace(/[\\W_]+/g, \"_\")}.csv`\n                );\n                pom.click();\n              }}\n            >\n              <UIImage\n                source={require(\"@app/imgs/share.png\")}\n                style={{ width: 12, height: 12, marginLeft: 8 }}\n              />\n              Export CSV\n            </UIButton>\n            <UIButton\n              size=\"small\"\n              style={{ margin: 0, marginLeft: 8 }}\n              labelStyle={{\n                flexDirection: \"row\",\n                alignItems: \"center\",\n                paddingTop: 2,\n                paddingBottom: 2,\n                paddingHorizontal: 0\n              }}\n              onPress={() => {\n                data.navigation.navigate(\"MuridDetail\", {\n                  item: {},\n                  kelas: data.kelas\n                });\n              }}\n            >\n              <UIImage\n                source={require(\"@app/imgs/plus.png\")}\n                style={{ width: 12, height: 12, marginLeft: 8 }}\n              />\n              Tambah Siswa\n            </UIButton>\n          </View>\n        </View>\n        <UIList\n          data={data.list}\n          extraData={meta.checked.length}\n          loading={data.loading}\n          render={(list: any) => {\n            const item = list.item;\n            return (\n              <View\n                style={{ flexDirection: \"row\", alignItems: \"center\", flex: 1 }}\n              >\n                <TouchableOpacity\n                  style={{\n                    height: 60,\n                    paddingLeft: 10,\n                    paddingRight: 3,\n                    borderBottomColor: \"#ccc\",\n                    borderBottomWidth: 1,\n                    alignItems: \"center\",\n                    justifyContent: \"center\"\n                  }}\n                  onPress={() => {\n                    const idx = meta.checked.indexOf(parseInt(item.id));\n                    if (idx >= 0) {\n                      meta.checked.splice(idx, 1);\n                    } else {\n                      meta.checked.push(parseInt(item.id));\n                    }\n                  }}\n                >\n                  <Text style={{ fontSize: 20 }}>\n                    {meta.checked.indexOf(parseInt(item.id)) >= 0 ? \"☑\" : \"☐\"}\n                  </Text>\n                </TouchableOpacity>\n                <UIListItem\n                  style={{\n                    height: 60,\n                    flex: 1\n                  }}\n                  onPress={() => {\n                    data.navigation.navigate(\"MuridDetail\", {\n                      item,\n                      kelas: data.kelas\n                    });\n                  }}\n                >\n                  <View style={{ flexDirection: \"row\", alignItems: \"center\" }}>\n                    <Text\n                      style={{\n                        paddingRight: 10,\n                        fontSize: 17,\n                        fontWeight: \"bold\"\n                      }}\n                    >\n                      {list.index + 1}\n                    </Text>\n                    <View>\n                      <Text style={{ fontSize: 16 }}>{item.nama_murid}</Text>\n                      <View\n                        style={{ flexDirection: \"row\", alignItems: \"center\" }}\n                      >\n                        <Text style={{ fontSize: 13 }}>\n                          {item.is_active === \"y\" ? \"Aktif\" : \"Non-Aktif\"}\n                          &nbsp; &bull; &nbsp;\n                        </Text>\n                        <Text\n                          style={{\n                            fontSize: 13,\n                            color: !item.data ? \"#ccc\" : \"green\"\n                          }}\n                        >\n                          {item.data ? `Data diri tersedia` : `Tanpa data diri`}\n                        </Text>\n                      </View>\n                    </View>\n                  </View>\n                  <View>\n                    <Text\n                      style={{\n                        fontSize: 12,\n                        color: \"#999\",\n                        textAlign: \"right\"\n                      }}\n                    >\n                      NSA: {item.nsa}\n                    </Text>\n                    <Text\n                      style={{\n                        fontSize: 12,\n                        color: \"#999\",\n                        textAlign: \"right\"\n                      }}\n                    >\n                      NISN: {item.nisn}\n                    </Text>\n                  </View>\n                </UIListItem>\n              </View>\n            );\n          }}\n        />\n      </View>\n    );\n  }\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AADA;AAGA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAmBA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AAIA;AACA;AApFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuFA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAFA;AAIA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAHA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAlGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsGA;;;;A","sourceRoot":""}